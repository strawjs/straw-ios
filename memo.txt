


plugin -> service


straw-ios-http-service
straw-ios-http-service.jp



Next naming candidate
nawa.js - NAWA: NAtive Webview Arch
It also means the ç¸„ (rope, pronounced na-wa in Japanese language) between native and webview.

/**
 * StrawCall class is the representation of the request call from js to native.
 *
 */
@interface StrawCall : NSObject

@property (nonatomic, retain) NSNumber *callId;
@property (nonatomic, retain) NSString *service;
@property (nonatomic, retain) NSString *method;
@property (nonatomic, retain) BOOL *success;
@property (nonatomic, assign) Straw *straw;

- (void)succeed;
- (void)succeedWithString:(NSString *)value;
- (void)succeedWithNumber:(NSNumber *)value;
- (void)succeedWithJSON:(JSONObject *)value;

- (void)failWithCode:(NSNumber *)code withMessage:(NSString *)message;


@end

/**
 * StrawCallFactory is the factory class of StrawCall objects.
 */
@interface StrawCallFactory : NSObject
+ (StrawCall *)createFromJSON:(JSONObject *)json withStraw:(Straw *)straw;
@end

/**
 * StrawService is
 */
@interface StrawService: NSObject

@property (nonatomic, assign, readonly) UIViewController *viewController
@property (nonatomic, assign, readonly) UIWebView *webView;

@end


/**
 *
 */
@interface ExampleService : StrawService
- (void)action:(JSONObject *)arg;
@end

@implementation ExampleService
- (void)action:(JSONObject *)arg withCall:(StrawCall *)call {
    if ([self blah]) {
        [call succeedWith:obj];
    } else {
        [call failWithCode:123 withMessage:@"example failed!"];
    }
}
@end




[END]
